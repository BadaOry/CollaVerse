<?xml version="1.0" encoding="UTF-8"?>

<!-- Mapper 설정 파일임을 선언 -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace = "com.collaverse.mvc.schedule.mapper.ScheduleMapper">
	<resultMap type="com.collaverse.mvc.schedule.model.ScheduleVO" id="scheduleVOListResultMap">
		<id property="no" column="NO" />
		<result property="subject" column="SUBJECT"/>
		<result property="startDate" column="START_DATE"/>
		<result property="endDate" column="END_DATE"/>
		<result property="memo" column="MEMO"/>
		<result property="category" column="CATEGORY"/>
	</resultMap>
	
	<select id="showSchedule" parameterType = "String" resultMap="scheduleVOListResultMap">
    		SELECT * FROM SCHEDULE
    </select>
    
    <!-- 스케쥴 조회 -->
    <select id="getSchedule" parameterType = "_int" resultMap="scheduleVOListResultMap">
        SELECT * FROM SCHEDULE WHERE NO = #{no}
    </select>

	<!-- 스케줄 추가 -->
	<insert id="addSchedule" parameterType = "com.collaverse.mvc.schedule.model.ScheduleVO">
    	INSERT INTO
    		SCHEDULE(NO,SUBJECT,START_DATE,END_DATE,MEMO,CATEGORY)
    	VALUES
    		(SEQ_SCHEDULE_NO.NEXTVAL,#{subject},#{startDate},
    		(SELECT TO_CHAR (TO_DATE(#{endDate}, 'yyyy-mm-dd') + INTERVAL '1' DAY , 'YYYY-MM-DD') 
			FROM DUAL)
			,#{memo},#{category})
   	</insert>
   	
   	<!-- 게시판 삭제 -->
    <delete id="deleteSchedule" parameterType = "_int"  >
        DELETE FROM calendar WHERE no = #{no}
    </delete>

</mapper>